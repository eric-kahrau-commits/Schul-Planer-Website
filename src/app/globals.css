@tailwind base;
@tailwind components;
@tailwind utilities;

@keyframes coin-sparkle {
  0%, 100% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1); }
}

.coin-sparkle-dot {
  animation: coin-sparkle 1.5s ease-in-out infinite;
}

@keyframes pet-breathe {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.animate-pet-breathe {
  animation: pet-breathe 3s ease-in-out infinite;
}

:root {
  --study-bg: #fef9f3;
  --study-card: #ffffff;
  --study-border: #e8e4df;
  --study-text: #2d3748;
  --study-muted: #718096;
  --study-accent: #88d4ab;
  --study-accent-hover: #6bc494;
  --study-mint: #a8e6cf;
  --study-sage: #88d4ab;
}

.dark {
  --study-bg: #1a1b26;
  --study-card: #24283b;
  --study-border: #3b3f54;
  --study-text: #c0caf5;
  --study-muted: #9aa2c4;
  --study-accent: #7dcfff;
  --study-accent-hover: #7aa2f7;
  --study-mint: #73daca;
  --study-sage: #9ece6a;
}

/* Safe area for notched phones (e.g. iPhone) */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

body {
  @apply antialiased min-w-0;
  background-color: var(--study-bg);
  color: var(--study-text);
  /* Prevent horizontal scroll on mobile */
  overflow-x: hidden;
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}

/* Smooth scroll, prevent horizontal overflow */
html {
  scroll-behavior: smooth;
  overflow-x: hidden;
  /* iOS: prevent rubber-band overscroll on body */
  overscroll-behavior-x: none;
}

*:focus-visible {
  outline: 2px solid var(--study-sage);
  outline-offset: 2px;
}

/* Card style – responsive padding, touch-friendly on mobile */
.card {
  background-color: var(--study-card);
  border: 1px solid var(--study-border);
  @apply rounded-xl p-4 shadow-sm transition-shadow hover:shadow-md sm:rounded-2xl sm:p-5;
}

/* Minimum touch target size (44px) for interactive elements on touch devices */
@media (pointer: coarse) {
  .min-touch {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Space for mobile bottom navigation; reset on desktop */
.pb-bottom-nav {
  padding-bottom: calc(5rem + var(--safe-area-inset-bottom));
}
@media (min-width: 768px) {
  .pb-bottom-nav {
    padding-bottom: 0;
  }
}

/* Progress bar animation */
@keyframes progress-fill {
  from {
    width: 0%;
  }
}

.progress-bar-inner {
  animation: progress-fill 0.6s ease-out forwards;
}

/* Tierwelt: sanfte Idle-Animation */
@keyframes pet-breathe {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}
.animate-pet-breathe {
  animation: pet-breathe 3s ease-in-out infinite;
}

/* Lernmünzen-Belohnung: Coin-Pop & Sparkle */
@keyframes coin-pop {
  0% { transform: scale(0); opacity: 0; }
  55% { transform: scale(1.15); }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes coin-emoji-bounce {
  0% { transform: scale(0.5); opacity: 0; }
  60% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes coin-sparkle {
  0% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1.3); }
  100% { opacity: 0.9; transform: scale(1); }
}
.coin-circle {
  animation: coin-pop 0.55s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}
.coin-emoji {
  animation: coin-emoji-bounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s forwards;
  opacity: 0;
}
.coin-sparkle-dot {
  animation: coin-sparkle 0.5s ease-out forwards;
  opacity: 0;
}
